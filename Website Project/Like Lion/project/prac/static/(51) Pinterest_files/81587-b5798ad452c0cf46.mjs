(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[81587],{727407:(e,t,i)=>{i.d(t,{Z:()=>L});var n=i(667294),a=i(23279),r=i.n(a),o=i(102156);var s=i(30494),l=i(80078),h=i(549135),d=i(748455),c=i(883119),u=i(785893);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=[0,.25,.5,.75,.95,.97],g=[0,.5,.8,.99,1],v="-64px 0px 0px 0px",y={rootMargin:v,threshold:g},f={rootMargin:v,threshold:l.iM},w=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function b(){return(new Date).getTime()}function _(e){return!!e.volume&&e.volume>0}class L extends n.Component{constructor(e){super(e),m(this,"videoWrapperRef",(0,n.createRef)()),m(this,"handleWindowResize",(()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}})),m(this,"handlePlayheadDown",(({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})})),m(this,"handlePlayheadUp",(({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})})),m(this,"handleLoop",(()=>{this.videoTime=0})),m(this,"handleTimeChange",(e=>{const{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;const n=1e3*e.time,a=function(e,t,i,n){if(e>t)return null;if(i<=0)return null;for(const a of n){const n=a*i;if(e<=n&&t>n)return a}return null}(this.videoTime,n,this.currentInterval.videoDuration,p);if("number"==typeof a&&this.props.playing&&!t&&i){const e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a})}this.videoTime=n,this.props.onTimeChange&&this.props.onTimeChange(e)})),m(this,"handleDurationChange",(e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)})),m(this,"handleReady",(e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)})),m(this,"handleEnded",(e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)})),m(this,"handleVisibilityChange",((e,t)=>{if(0===e.length)return;const i=e.slice(-1)[0],n=function(e,t){for(let i=0;i<t.length;i+=1){const n=t[i],a=t[i+1];if(null==a)return n;if(n<=e&&e<a)return n}return null}(Number.parseFloat(i.intersectionRatio.toFixed(2)),g);"number"==typeof n&&(this.visible=n>=.5),null==n||n===this.currentInterval.viewability||this.fullscreen||(0===n?this.startNewInterval({viewability:n,playbackState:w.PAUSED}):this.startNewInterval({viewability:n}))})),m(this,"handleFullscreenChange",(({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})})),m(this,"handleClose",(()=>{this.startNewInterval()})),m(this,"handleContextMenu",(e=>{e.preventDefault()})),this.state={ready:!1,seeking:!1};const t=b();this.handleWindowResize=r()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:_(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const i={};_(e)&&!_(this.props)?i.isAudible=!1:!_(e)&&_(this.props)&&(i.isAudible=!0);const n=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==n&&(i.playbackState=n),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?w.PLAYING:w.PAUSED:w.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:i}=this.props,{height:n,width:a,windowHeight:r,windowWidth:o,viewability:s,...l}=t;if(null!=n&&null!=a&&null!=r&&null!=o&&null!=s){const t={...l,height:n,width:a,windowHeight:r,windowWidth:o,viewability:s};(0,h.j)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:i,endTime:n,videoStartTime:a,videoEndTime:r,isAudible:o,height:s,width:l,playbackState:h,quartile:d,quartilePercentValue:c,windowHeight:u,windowWidth:m,viewability:p}},...g}=e;return{...g,eventData:{videoEventData:{videoDuration:t,time:i,endTime:n,videoTime:a,endVideoTime:r,isAudible:o,height:s,width:l,playbackState:h,quartile:d,quartilePercentValue:c,windowHeight:u,windowWidth:m,viewability:p}}}}({...i,view:this.fullscreen?108:i.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=b();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:a,accessibilityUnmuteLabel:r,aspectRatio:l,captions:h,contextLogData:m,controls:p,cropHeight:g,hlsConfig:v,inAdsDesktopVideoExperiment:w,isAutoPlay:b,loop:_,objectFit:L,onLoadedChange:T,onPause:C,onPlay:P,onSeek:x,onVolumeChange:D,playbackRate:I,playing:S,playsInline:E,poster:R,preload:A,rootMargin:M,src:k,surface:N,videoStartTime:H,volume:W}=this.props,{seeking:V}=this.state,q=w?f:y;return void 0!==M&&(q.rootMargin=N?(0,s.e)(N):M),(0,u.jsx)(o.Z,{options:q,onVisibilityChange:this.handleVisibilityChange,children:(0,u.jsx)(c.xu,{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,dangerouslySetInlineStyle:{__style:g?{display:"flex",alignItems:"center",height:"236px"}:{}},children:(0,u.jsx)(d.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:a,accessibilityUnmuteLabel:r,aspectRatio:l,captions:h,contextLogData:m,controls:p,hlsConfig:v,isAutoPlay:b,loop:_,objectFit:L,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:T,onLoop:this.handleLoop,onPause:C,onPlay:P,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:x,onTimeChange:this.handleTimeChange,onVolumeChange:D,playbackRate:I,playing:!V&&S,playsInline:E,poster:R,preload:A,src:k,videoStartTime:H,visible:this.visible,volume:W})})})}}m(L,"defaultProps",c.nk.defaultProps)},30494:(e,t,i)=>{i.d(t,{e:()=>n});const n=e=>{if("undefined"==typeof window)return"";let t=0;const i=document.querySelector('[data-test-id="header"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:i}=e.getBoundingClientRect();t+=i}break;case"SearchItem":const i=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const n=document.querySelector('[data-test-id="search-tab-bar"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}const a=document.querySelector('[data-root-margin="search-one-bar"]');if(null!==a){const{height:e}=a.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"}},41743:(e,t,i)=>{i.d(t,{Z:()=>a});const n=["orig","736x","564x","474x","236x","170x"],a=(e,t)=>{const i=e[t];if(i)return i;const a=n.indexOf(t);if(a>=0)for(let r=a+1;r<n.length;r+=1){const t=e[n[r]];if(t)return t}return e["236x"]}},493858:(e,t,i)=>{i.d(t,{iR:()=>s,_Q:()=>l,w9:()=>h,P0:()=>d,Js:()=>c,bh:()=>m,Hx:()=>v,sK:()=>y});var n=i(41743),a=i(395047),r=i(508435),o=i(227340);const s=e=>!!e&&!!e.video_list,l=e=>!!e.promoted_is_lead_ad,h=e=>(0,o.eK)(e);function d(e){const t=!!e.carousel_data,i=t&&0===e.carousel_data.index;let n=e.images;if(t){const{carousel_slots:t,index:i=0}=e.carousel_data;n=t&&t[i]&&t[i].images||n}if(e.embed&&"gif"===e.embed.type&&(!t||i))return e.embed.src;if(!!n){const e=n,t=Object.keys(e).map((t=>{const i=t.split("x")[0];return Number.isNaN(Number(i))?t:(e[i]=e[t],i)}));t.sort();const i=t.pop();return e[i].url}return e.image_large_url||""}const c=(e,t)=>{let i=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(i=t.full_name),i},u=(e,t)=>{if(e){const i=((e,t)=>{let i=0;if(e){let n=27;"ja"===t&&(n=14);const a=2;i=Math.floor(e.length/n)+1,i>a&&(i=a)}return i})(e,t);return(e=>"ja"===e?23:19)(t)*i}return 0},m=(e,t=!1)=>e&&e.length>0&&!t,p=(e,t,i,n)=>{let r=0;const{description:o,vaseAnnotations:s}=h(e),l={seeMoreButtonHeight:15,seeMoreButtonBottomMargin:3,productSiteTitle:15,productSiteTitleTopMargin:4,vaseCarouselHeight:30,descriptionLineHeight:17,descriptionVerticalMargin:10,maxNumTitleLines:2,maxNumDescriptionLines:2};if(((e,t,i,n,a=!0)=>{if(!i)return null;if(a)return!m(t)&&t&&t.length>0;return!1})(0,s,e)&&(r+=l.seeMoreButtonHeight,r+=l.seeMoreButtonBottomMargin),(e=>!!(e.rich_metadata&&e.rich_metadata.products&&Array.isArray(e.rich_metadata.products)&&e.rich_metadata.products.length&&e.rich_metadata.site_name))(e)&&(r+=l.productSiteTitle,r+=l.productSiteTitleTopMargin),m(s,n)&&(r+=l.vaseCarouselHeight),!n){const e=(e=>{let t=0;if(e){e=(0,a.Z)(e);const i=35,n=2;t=Math.floor(e.length/i)+1,t>n&&(t=n)}return t})(o);r+=l.descriptionVerticalMargin+l.descriptionLineHeight*e}return e.pinner&&e.board&&(r+=28),r},g=(e,t,i,n=!1,a,r)=>{const s=(e=>{const{hasRichAttributionTitle:t,hasPlaceInfo:i}=(e=>{const t=e.rich_summary,i=t&&"mobile application"!==t.type_name;return{hasRichSummary:i,hasRichAttributionTitle:i&&t.display_name,hasPlaceInfo:!!e.place_summary}})(e);return!!(t||i||e.rich_metadata&&e.rich_metadata.title)})(e)?((e,t)=>{const i=(0,o.fs)(e);return u(i,t)+10})(e,t):0,l=n?0:p(e,0,0,a);return s||l?l+s+10:0},v=(e,t="orig")=>(0,n.Z)(e.images,t),y=(e,t,i,n,a,o,s,l)=>{if("placeholder"===e.type)return e.height;return((e,t)=>{if(!e||!e.images||!e.images["236x"])return 0;const i=e.images["236x"].height;let n=i<t?i:t,a=600;i>600&&!e.fullImage&&(a=500);const o=v(e,"orig");if(o){var s,l;const e=Math.floor((null!==(s=o.height)&&void 0!==s?s:1)*r.yF/(null!==(l=o.width)&&void 0!==l?l:1));n=e>a?a:e}return n})(e,t)+(o?0:g(e,l,0,a,s))}},227340:(e,t,i)=>{i.d(t,{RC:()=>o,EU:()=>s,fs:()=>l,eK:()=>h,Ly:()=>d,hP:()=>c});var n=i(395047),a=i(537343);const r=e=>"string"==typeof e?e:"",o=e=>e.story_pin_data&&e.story_pin_data.metadata&&e.story_pin_data.metadata.pin_title||e.title,s=(e,t)=>e?e.trim().length>t?(0,a.ZP)(e.trim(),t).trim():e.trim():"",l=e=>{const{grid_title:t}=e||{},{hasRichAttributionTitle:i,hasPlaceInfo:n}=(e=>{const{place_summary:t,rich_summary:i}=e||{},n=i&&"mobile application"!==i.type_name;return{hasRichSummary:n,hasRichAttributionTitle:n&&i.display_name,hasPlaceInfo:!!t}})(e),a=o(e),r=s(t,200);return r||(i?(e=>{const{rich_summary:t}=e;let{apple_touch_icon_images:i,favicon_images:n}=t;return i=i||{},n=n||{},{faviconLink:i["50x"]||n["50x"]||i.orig||n.orig,siteName:t.site_name||e.domain,title:t.display_name}})(e).title:n?(e=>{const{place_summary:t}=e;return{faviconLink:t.source_icon,siteName:t.source_name||e.domain,title:t.name}})(e).title:e.rich_metadata&&e.rich_metadata.title?e.rich_metadata.title:e.story_pin_data_id&&a?a:null)},h=e=>{const t=e.pin_join||{},i=t.visual_annotation||[],r=i.map((e=>(t.annotations_with_links||{})[e]||{name:e,url:""}));let o="";const s=(e.rich_metadata||{}).description||"",l=e.closeup_unified_description||"",h=(e=>e.rich_summary&&e.rich_summary.display_name||e.place_summary&&e.place_summary.name||"")(e).toLocaleLowerCase().trim(),d=s.toLocaleLowerCase().trim(),c=l.toLocaleLowerCase().trim();return l&&l.length>3&&c!==h?o=l:s&&s.length>3&&d!==h&&(o=s),o&&(o=(0,n.Z)((0,a.ZP)(o,496)).trim()),{description:o,vaseAnnotations:i,annotationsWithLinks:r}},d=(e,t,i)=>{const n=(i||[]).map((e=>e.name)),a=e=>(e||[])[0]||null;return l(e)||a(t)||a(n)||e.title},c=(e,t,i)=>{const n=r(e);let a=n;if(i){const e=i.seo_description;if(e){const i=e.toLowerCase(),o=r(t);i!==n.toLowerCase()&&i!==o.trim().toLowerCase()&&(a=e)}let o=i.visual_annotation;o&&(o=o.join(", "),a&&(a+=" "),a+=o)}return a}},395047:(e,t,i)=>{i.d(t,{Z:()=>a});const n=/\s\s+/g,a=e=>e.replace(n," ")},537343:(e,t,i)=>{i.d(t,{ZP:()=>n});function n(e,t=80,i="…",n=false){let a;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||n)a=e.substring(0,t);else{const i=e.lastIndexOf(" ",t);a=e.substring(0,i)}return a=a.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""),a+i}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/81587-b5798ad452c0cf46.mjs.map